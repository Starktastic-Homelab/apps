apiVersion: v1
kind: ConfigMap
metadata:
  name: authentik-email-templates
  namespace: authentik
data:
  account_confirmation_branded.html: |
    {% extends 'email/base.html' %}

    {% load authentik_stages_email %}
    {% load i18n %}

    {% block content %}
    {% if user.attributes.locale == "ru" %}
    <tr>
      <td align="center">
        <h1>Добро пожаловать!</h1>
      </td>
    </tr>
    <tr>
      <td align="center">
        <table border="0">
          <tr>
            <td align="center" style="max-width: 300px; padding: 20px 0; color: #212124;">
              Вы приглашены в Starktastic Services с доступом к Ben+ и другим сервисам.
              Подтвердите свою почту, нажав на кнопку ниже.
            </td>
          </tr>
          <tr>
            <td align="center" class="btn btn-primary">
              <a id="confirm" href="{{ url }}" rel="noopener noreferrer" target="_blank">Подтвердить</a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    {% else %}
    <tr>
      <td align="center">
        <h1>Welcome to Starktastic Services!</h1>
      </td>
    </tr>
    <tr>
      <td align="center">
        <table border="0">
          <tr>
            <td align="center" style="max-width: 300px; padding: 20px 0; color: #212124;">
              You've been invited to join Starktastic Services, which includes access to Ben+ and more.
              To get started, please confirm your email address by clicking the button below.
            </td>
          </tr>
          <tr>
            <td align="center" class="btn btn-primary">
              <a id="confirm" href="{{ url }}" rel="noopener noreferrer" target="_blank">Confirm Email</a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    {% endif %}
    {% endblock %}

    {% block sub_content %}
    <tr>
      <td style="padding: 20px; font-size: 12px; color: #666; word-break: break-all; overflow-wrap: break-word;" align="center">
        {% if user.attributes.locale == "ru" %}
        Если кнопка не работает, скопируйте ссылку в браузер: {{ url }}
        {% else %}
        If the button doesn't work, copy this link into your browser: {{ url }}
        {% endif %}
      </td>
    </tr>
    {% endblock %}
  welcome_instructions.html: |
    {% extends 'email/base.html' %}

    {% load authentik_stages_email %}

    {% block content %}
    {% if locale == "ru" %}
    <tr>
      <td align="center">
        <h1>Добро пожаловать!</h1>
      </td>
    </tr>
    <tr>
      <td style="padding: 20px; color: #212124;">
        <p style="margin-top: 0;">Привет, {{ user.name|default:user.username }}!</p>
        <p>Ваш аккаунт готов. Вот что вам доступно.</p>

        <h2 style="font-size: 18px; margin-top: 24px;">Ben+ &mdash; Медиа</h2>
        <p>Смотрите фильмы, сериалы и многое другое. Установите приложение Jellyfin:</p>
        <table border="0" style="margin: 10px 0 20px 0;">
          <tr><td style="padding: 4px 15px;"><a href="https://apps.apple.com/app/jellyfin-mobile/id1480192618" rel="noopener noreferrer" target="_blank">iPhone / iPad</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://play.google.com/store/apps/details?id=org.jellyfin.mobile" rel="noopener noreferrer" target="_blank">Android</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://play.google.com/store/apps/details?id=org.jellyfin.androidtv" rel="noopener noreferrer" target="_blank">Android TV / Fire TV</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://jellyfin.org/downloads" rel="noopener noreferrer" target="_blank">ПК и другие устройства</a></td></tr>
          <tr><td style="padding: 4px 15px;">Или откройте <a href="https://benplus.app" rel="noopener noreferrer" target="_blank">benplus.app</a> в браузере</td></tr>
        </table>
        <p>Адрес сервера: <strong>https://benplus.app</strong></p>
        <p>Войдите с логином и паролем, которые вы создали при регистрации.</p>

        <h3 style="font-size: 16px; margin-top: 20px;">Запросить контент</h3>
        <p>Не нашли что посмотреть? Запросите через Jellyseerr &mdash; контент добавится автоматически.</p>
        {% if media_preference == "original" or media_preference == "both" %}
        <p><a href="https://request.benplus.app" rel="noopener noreferrer" target="_blank" style="font-weight: bold;">request.benplus.app</a> &mdash; Оригинальный контент</p>
        {% endif %}
        {% if media_preference == "ru" or media_preference == "both" %}
        <p><a href="https://request-ru.benplus.app" rel="noopener noreferrer" target="_blank" style="font-weight: bold;">request-ru.benplus.app</a> &mdash; Русский дубляж</p>
        {% endif %}

        <p style="margin-top: 20px; color: #666;">Есть вопросы? Обратитесь к тому, кто вас пригласил.</p>
      </td>
    </tr>
    {% else %}
    <tr>
      <td align="center">
        <h1>Welcome to Starktastic Services!</h1>
      </td>
    </tr>
    <tr>
      <td style="padding: 20px; color: #212124;">
        <p style="margin-top: 0;">Hi {{ user.name|default:user.username }},</p>
        <p>Your account is all set up. Here's what you have access to.</p>

        <h2 style="font-size: 18px; margin-top: 24px;">Ben+ &mdash; Media Streaming</h2>
        <p>Stream movies, TV shows, and more. Install the Jellyfin app on your device:</p>
        <table border="0" style="margin: 10px 0 20px 0;">
          <tr><td style="padding: 4px 15px;"><a href="https://apps.apple.com/app/jellyfin-mobile/id1480192618" rel="noopener noreferrer" target="_blank">iPhone / iPad</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://play.google.com/store/apps/details?id=org.jellyfin.mobile" rel="noopener noreferrer" target="_blank">Android Phone / Tablet</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://play.google.com/store/apps/details?id=org.jellyfin.androidtv" rel="noopener noreferrer" target="_blank">Android TV / Fire TV</a></td></tr>
          <tr><td style="padding: 4px 15px;"><a href="https://jellyfin.org/downloads" rel="noopener noreferrer" target="_blank">Desktop &amp; Other Devices</a></td></tr>
          <tr><td style="padding: 4px 15px;">Or visit <a href="https://benplus.app" rel="noopener noreferrer" target="_blank">benplus.app</a> in your browser</td></tr>
        </table>
        <p>Server address: <strong>https://benplus.app</strong></p>
        <p>Log in with the username and password you created during sign-up.</p>

        <h3 style="font-size: 16px; margin-top: 20px;">Request New Content</h3>
        <p>Can't find something? Use Jellyseerr to request movies and TV shows &mdash; they'll be added automatically.</p>
        {% if media_preference == "original" or media_preference == "both" %}
        <p><a href="https://request.benplus.app" rel="noopener noreferrer" target="_blank" style="font-weight: bold;">request.benplus.app</a> &mdash; Original content</p>
        {% endif %}
        {% if media_preference == "ru" or media_preference == "both" %}
        <p><a href="https://request-ru.benplus.app" rel="noopener noreferrer" target="_blank" style="font-weight: bold;">request-ru.benplus.app</a> &mdash; Русский дубляж</p>
        {% endif %}

        <p style="margin-top: 20px; color: #666;">Questions? Reach out to the person who invited you.</p>
      </td>
    </tr>
    {% endif %}
    {% endblock %}
